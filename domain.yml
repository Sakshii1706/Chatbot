version: "3.1"

intents:
  - greet
  - goodbye
  - book_ticket
  - check_booking

entities:
  - source
  - destination
  - date_time
  - seats
  - booking_ref

slots:
  source:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: source
      - type: from_text
        conditions:
          - active_loop: ticket_form
            requested_slot: source
  destination:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: destination
      - type: from_text
        conditions:
          - active_loop: ticket_form
            requested_slot: destination
  date_time:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: date_time
      - type: from_text
        conditions:
          - active_loop: ticket_form
            requested_slot: date_time
  seats:
    type: float
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: ticket_form
            requested_slot: seats
  booking_ref:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: booking_ref
      - type: from_text
        conditions:
          - active_loop: booking_form
            requested_slot: booking_ref

forms:
  ticket_form:
    required_slots:
      - source
      - destination
      - date_time
      - seats
  booking_form:
    required_slots:
      - booking_ref

responses:
  utter_greet:
    - text: |
        Hello! üëã I'm your Bangalore Metro assistant. I can help you book tickets.
        ‡≤®‡≤Æ‡≤∏‡≥ç‡≤ï‡≤æ‡≤∞! ‡≤®‡≤æ‡≤®‡≥Å ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≥Ü‡≤Ç‡≤ó‡≤≥‡≥Ç‡≤∞‡≥Å ‡≤Æ‡≥Ü‡≤ü‡≥ç‡≤∞‡≥ã ‡≤∏‡≤π‡≤æ‡≤Ø‡≤ï. ‡≤ü‡≤ø‡≤ï‡≥Ü‡≤ü‡≥ç ‡≤¨‡≥Å‡≤ï‡≥ç ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤∏‡≤π‡≤æ‡≤Ø ‡≤Æ‡≤æ‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≥á‡≤®‡≥Ü.
  utter_goodbye:
    - text: |
        Goodbye! Have a safe journey. üöá
        ‡≤µ‡≤ø‡≤¶‡≤æ‡≤Ø! ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤™‡≥ç‡≤∞‡≤Ø‡≤æ‡≤£ ‡≤∏‡≥Å‡≤∞‡≤ï‡≥ç‡≤∑‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø‡≤∞‡≤≤‡≤ø.
  utter_ask_source:
    - text: |
        Please tell me your source station.
        ‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤™‡≥ç‡≤∞‡≤æ‡≤∞‡≤Ç‡≤≠ ‡≤∏‡≥ç‡≤ü‡≥á‡≤∑‡≤®‡≥ç ‡≤π‡≥á‡≤≥‡≤ø.
  utter_ask_destination:
    - text: |
        Great. Now tell me your destination station.
        ‡≤â‡≤§‡≥ç‡≤§‡≤Æ. ‡≤à‡≤ó ‡≤ó‡≤Æ‡≥ç‡≤Ø ‡≤∏‡≥ç‡≤•‡≤≥‡≤¶ ‡≤∏‡≥ç‡≤ü‡≥á‡≤∑‡≤®‡≥ç ‡≤π‡≥á‡≤≥‡≤ø.
  utter_ask_date_time:
    - text: |
        When do you want to travel? You can say "today 6 pm" or "tomorrow 9:30 am".
        ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤Ø‡≤æ‡≤µ‡≤æ‡≤ó ‡≤™‡≥ç‡≤∞‡≤Ø‡≤æ‡≤£ ‡≤¨‡≤Ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≥Ä‡≤∞‡≤ø? "‡≤á‡≤Ç‡≤¶‡≥Å ‡≤∏‡≤Ç‡≤ú‡≥Ü 6 ‡≤ó‡≤Ç‡≤ü‡≥Ü" ‡≤Ö‡≤•‡≤µ‡≤æ "‡≤®‡≤æ‡≤≥‡≥Ü ‡≤¨‡≥Ü‡≤≥‡≤ó‡≥ç‡≤ó‡≥Ü 9:30" ‡≤é‡≤Ç‡≤¶‡≥Å ‡≤π‡≥á‡≤≥‡≤¨‡≤π‡≥Å‡≤¶‡≥Å.
  utter_ask_seats:
    - text: |
        How many seats do you need? (1-6)
        ‡≤®‡≤ø‡≤Æ‡≤ó‡≥Ü ‡≤é‡≤∑‡≥ç‡≤ü‡≥Å ‡≤∏‡≥Ä‡≤ü‡≥Å‡≤ó‡≤≥‡≥Å ‡≤¨‡≥á‡≤ï‡≥Å? (1-6)
  utter_submit:
    - text: |
        Noted. Booking from {source} to {destination} at {date_time} for {seats} seat(s). I will now check availability.
        ‡≤ó‡≤Æ‡≤®‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü. {source} ‡≤á‡≤Ç‡≤¶ {destination} ‡≤ó‡≥Ü {date_time} ‡≤∏‡≤Æ‡≤Ø‡≤ï‡≥ç‡≤ï‡≥Ü {seats} ‡≤∏‡≥Ä‡≤ü‡≥Å(‡≤ó‡≤≥‡≥Å)‡≤ó‡≤æ‡≤ó‡≤ø ‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≥á‡≤®‡≥Ü.
  utter_ask_booking_ref:
    - text: |
        Please share your booking reference (e.g., BMRC-123456-7890).
        ‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≥Å‡≤ï‡≤ø‡≤Ç‡≤ó‡≥ç ‡≤â‡≤≤‡≥ç‡≤≤‡≥á‡≤ñ ‡≤∏‡≤Ç‡≤ñ‡≥ç‡≤Ø‡≥Ü ‡≤®‡≥Ä‡≤°‡≤ø (‡≤â‡≤¶‡≤æ., BMRC-123456-7890).

actions:
  - validate_ticket_form
  - action_submit_ticket_form
  - action_check_booking
